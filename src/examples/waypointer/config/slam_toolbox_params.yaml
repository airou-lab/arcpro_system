slam_toolbox:
  ros__parameters:

    use_sim_time: false

    odom_frame: "odom"
    map_frame: "map"
    base_frame: "base_link"
    scan_topic: "/scan"
    publish_tf: false #should be false by default anyways

    transform_timeout: 2.0
    tf_buffer_duration: 30.0 # (seconds)

    resolution: 0.06               # originally 0.05, higher = larger pixels, lower = finer detail
    map_update_interval: 1.0       # (seconds) How often the map is republished.
    max_laser_range: 50.0          # (meters) Max range of your LIDAR. Truncates scans beyond this.

    # --- Scan Matcher ---
    # How to match new scans to the map. 'ceres_scan_matcher' is the default and best.
# Ceres scan matching settings
    ceres_scan_matcher:
      # TRUST THE LASER:
      # Increase this value. Tells the solver "It is VERY important
      # that the laser scan points (red dots) line up with the map (black lines)."
      occupied_space_weight: 850.0  # Was 20.0 then 60

      # DISTRUST ODOMETRY:
      # Decrease these values. Tells the solver "My odometry guess
      # is probably wrong. Feel free to ignore it."
      translation_weight: 10.0      # Was 10.0
      rotation_weight: 1.0         # Was 1.0      covariance_scale: 0.001
      use_nonmonotonic_steps: true
      max_num_iterations: 50
      max_solver_time_in_seconds: 0.04

    # --- Loop Closure & Pose Graph ---
    # These control how often the robot tries to "close loops" (i.e., recognize
    # a place it's been before) and correct the map.
    do_loop_closing: true
    loop_search_maximum_distance: 100.0  # (meters) How far to search for a loop closure.
    minimum_travel_distance: 0.008        # (meters) Min distance robot must travel to add a new node.
    minimum_travel_heading: 0.09

 #me used this last time
#    minimum_travel_distance: 0.05       # Was 0.1. Update every 5cm.
#    minimum_travel_heading: 0.034       # Was 0.087 (5 deg). Update every 2 degrees.
    # --- General ---
    use_scan_matching: true             # Must be true to do SLAM.
    throttle_scans: 1                   # Process every 1 scan. Increase if CPU is too high.

    solver_plugin: "solver_plugins::CeresSolver"

    ceres_solver_options:
      use_nonmonotonic_steps: true
      max_num_iterations: 50
      num_threads: 1